# Parallel Module



### How to write the module spec

* Set `jobType` to `parallel`.

* Specify the detailed information of `implementation/parallel` block. Here are the samples:

  * `amlEnvironment` or `image`: Specify the environment the parallel module script runs in.

    > The environment must contains the following packages to enable the parallel module run:
    >
    > * Pip packages:
    >
    > ```
    > azure-storage-queue~=2.1
    > azure-storage-common~=2.1
    > azureml-core~=1.0
    > azureml-telemetry~=1.0
    > filelock~=3.0
    > azureml-dataprep[fuse,pandas]~=1.1
    > ```
    >
    > * Conda packages:
    >
    > ```
    > psutil
    > ```

  * `inputData`: The inputs provide the data to be splitted into mini_batches for parallel execution.

  * `outputData`: The output for the summarized result that generated by the user script.

  * `entry`: the user script to process mini_batches.

  * `args`: The arguments passed to the script. No need to set information about `inputData` and `outputData` here.



### A sample module spec

```yaml
amlModuleIdentifier:
  moduleName: Parallel Sample
  moduleVersion: 0.0.1
  namespace: microsoft.com/azureml/samples
metadata:
  annotations:
    tags: [Sample, Parallel]
    contact: Microsoft Coporation <xxx@microsoft.com>
    helpDocument: https://aka.ms/parallel-modules
description: A sample Parallel module.
jobType: parallel
inputs:
  - name: Data Input 1
    type: AnyDirectory
  - name: Model
    type: ModelDirectory
  - name: Some Parameter
    type: String
outputs:
  - name: Data Ouptut
    type: AnyDirectory
  - name: My Customized Ouptut
    type: AnyDirectory
implementation:
  parallel:
    amlEnvironment:
      # same as basic/mpi modules
    inputData: [Data Input 1, Data Input 2]
    outputData: Data Output
    entry: worker.py
    args: [
      --model, {inputPath: Model},
      --some-param, {inputValue: Some Parameter},
      --my-output, {outputPath: My Customized Output}
    ]
```



### Known limitations

- Only support FileDataset as input.
- Only support summary-only output action.

###